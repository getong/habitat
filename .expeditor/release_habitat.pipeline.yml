expeditor:
  secrets:
    PIPELINE_HAB_AUTH_TOKEN:
      path: account/static/habitat/chef-ci
      field: auth_token # Production Builder
      # acceptance_auth_token = acceptance
  accounts:
    - aws/chef-cd
  defaults:
    buildkite:
      timeout_in_minutes: 45
      env:
        HAB_ORIGIN: "core"
        PIPELINE_HAB_BLDR_URL: "https://bldr.habitat.sh"
        # Necessary to prevent old studios from poisoning builds after core plans refreshes
        HAB_STUDIO_SECRET_HAB_FEAT_IGNORE_LOCAL: "true"

steps:

  #  Commenting out 2022 container while we wait for expeditor to support
  - label: ":docker: :windows: Upload windows 2022 container to Docker Hub"
    command: .expeditor/scripts/release_habitat/publish_docker_studio.ps1
    expeditor:
      executor:
        windows:
          os_version: 2022
